<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>HeslingtonHustle.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">tests</a> &gt; <a href="index.source.html" class="el_package">io.github.uoyeng1g6</a> &gt; <span class="el_source">HeslingtonHustle.java</span></div><h1>HeslingtonHustle.java</h1><pre class="source lang-java linenums">package io.github.uoyeng1g6;

import com.badlogic.gdx.Game;
import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.graphics.Color;
import com.badlogic.gdx.graphics.Texture;
import com.badlogic.gdx.graphics.g2d.BitmapFont;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;
import com.badlogic.gdx.graphics.g2d.TextureAtlas;
import com.badlogic.gdx.graphics.g2d.TextureRegion;
import com.badlogic.gdx.maps.tiled.TiledMap;
import com.badlogic.gdx.maps.tiled.TmxMapLoader;
import com.badlogic.gdx.physics.box2d.Box2D;
import com.badlogic.gdx.scenes.scene2d.ui.Skin;
import io.github.uoyeng1g6.screens.*;
import space.earlygrey.shapedrawer.ShapeDrawer;

/**
 * The main game class. Handles the switching between different screens as well as most of the asset
 * loading and cleanup that is required for the rest of the game.
 */
public class HeslingtonHustle extends Game {
    /**
     * Enum representing all possible game states.
     */
<span class="nc" id="L26">    public enum State {</span>
        /**
         * The game is currently on the main menu screen.
         */
<span class="nc" id="L30">        MAIN_MENU,</span>
        /**
         * The game is currently being played.
         */
<span class="nc" id="L34">        PLAYING,</span>
        /**
         * The game is currently on the game over screen.
         */
<span class="nc" id="L38">        END_SCREEN,</span>
        /**
         * The game is currently on the player name input screen.
         */
<span class="nc" id="L42">        PLAYER_NAME_INPUT,</span>
        /**
         * The game is currently on the leaderboard screen.
         */
<span class="nc" id="L46">        LEADERBOARD</span>
    }

    /**
     * Whether debug mode is enabled - if {@code true} then hitbox outlines will be shown for the player
     * and any interactables, as well as showing layout debug lines for {@code scene2d.ui}.
     */
    public final boolean debug;
    /**
     * Whether physics debug mode is enabled - if {@code true} then hitbox outlines will be shown for any physics
     * objects handled by {@code box2d}.
     */
    public final boolean physicsDebug;

    /**
     * The skin to use when rendering {@code scene2d.ui} components.
     */
    public Skin skin;

    /**
     * Texture atlas containing all images for the player's sprite.
     */
    public TextureAtlas playerTextureAtlas;
    /**
     * Texture atlas containing all icons used to mark interaction locations on the map.
     */
    public TextureAtlas interactionIconsTextureAtlas;
    /**
     * Texture which is just a single white pixel. Required for {@link ShapeDrawer} to work properly.
     */
    public Texture whitePixel;

    /**
     * The tilemap to use for the game's background.
     */
    public TiledMap tiledMap;

    /**
     * The font to use when rendering tooltips.
     */
    public BitmapFont tooltipFont;
    /**
     * The font to use when rendering the screen overlay that is drawn while an interaction is in progress.
     */
    public BitmapFont overlayFont;

    /**
     * The global spritebatch to use for the game.
     */
    public SpriteBatch spriteBatch;
    /**
     * The global shapedrawer to use for the game.
     */
    public ShapeDrawer shapeDrawer;

    /**
     * The main menu screen instance.
     */
    MainMenu mainMenu;
    /**
     * The gameplay screen instance. A new one is required to be created each time the
     * player starts a new game.
     */
<span class="nc" id="L109">    Playing playing = null;</span>
    /**
     * The end screen instance. A new one is required to be created each time the
     * player finishes a game.
     */
<span class="nc" id="L114">    EndScreen endScreen = null;</span>
    /**
     * The name input screen instance. A new one is required to be created each time the
     * player finishes a game.
     */
<span class="nc" id="L119">    PlayerNameInput playerNameInputScreen = null;</span>
    /**
     * The leaderboard instance. A new one is required to be created each time the
     * player finishes a game.
     */
<span class="nc" id="L124">    Leaderboard leaderboard = null;</span>

    /**
     * The game's current state.
     */
<span class="nc" id="L129">    private State currentState = State.MAIN_MENU;</span>

<span class="nc" id="L131">    public HeslingtonHustle() {</span>
        // Properties retrieved from command-line to allow enabling of different debug modes to help with development
<span class="nc" id="L133">        debug = System.getProperty(&quot;game.debug&quot;, &quot;false&quot;).equals(&quot;true&quot;);</span>
<span class="nc" id="L134">        physicsDebug = System.getProperty(&quot;game.physicsDebug&quot;, &quot;false&quot;).equals(&quot;true&quot;);</span>
<span class="nc" id="L135">    }</span>

    /**
     * Quit the game to desktop.
     */
    public void quit() {
<span class="nc" id="L141">        Gdx.app.exit();</span>
<span class="nc" id="L142">    }</span>

    /**
     * Set the current game state. Handles switching between the different screens and cleanup between
     * screen changes.
     *
     * @param state the state that the game should transition to.
     */
    public void setState(State state) {
<span class="nc bnc" id="L151" title="All 6 branches missed.">        switch (state) {</span>
            case MAIN_MENU:
<span class="nc" id="L153">                this.setScreen(mainMenu);</span>
<span class="nc" id="L154">                break;</span>
            case PLAYING:
<span class="nc bnc" id="L156" title="All 2 branches missed.">                if (playing != null) {</span>
<span class="nc" id="L157">                    playing.dispose();</span>
                }
<span class="nc" id="L159">                playing = new Playing(this);</span>
<span class="nc" id="L160">                this.setScreen(playing);</span>
<span class="nc" id="L161">                break;</span>
            case END_SCREEN:
<span class="nc bnc" id="L163" title="All 2 branches missed.">                if (endScreen != null) {</span>
<span class="nc" id="L164">                    endScreen.dispose();</span>
                }
<span class="nc" id="L166">                endScreen = new EndScreen(this, playing.getGameState());</span>
<span class="nc" id="L167">                this.setScreen(endScreen);</span>
<span class="nc" id="L168">                break;</span>
            case PLAYER_NAME_INPUT:
<span class="nc bnc" id="L170" title="All 2 branches missed.">                if (playerNameInputScreen != null) {</span>
<span class="nc" id="L171">                    playerNameInputScreen.dispose();</span>
                }
<span class="nc" id="L173">                playerNameInputScreen = new PlayerNameInput(this);</span>
<span class="nc" id="L174">                this.setScreen(playerNameInputScreen);</span>
<span class="nc" id="L175">                break;</span>
            case LEADERBOARD:
<span class="nc bnc" id="L177" title="All 2 branches missed.">                if (leaderboard != null) {</span>
<span class="nc" id="L178">                    leaderboard.dispose();</span>
                }
<span class="nc" id="L180">                leaderboard = new Leaderboard(this, playerNameInputScreen.getLeaderboardManager(), endScreen.getExamScore());</span>
<span class="nc" id="L181">                this.setScreen(leaderboard);</span>
                break;
        }
<span class="nc" id="L184">        currentState = state;</span>
<span class="nc" id="L185">    }</span>

    @Override
    public void create() {
<span class="nc" id="L189">        Box2D.init();</span>

<span class="nc" id="L191">        skin = new Skin(Gdx.files.internal(&quot;skins/default/uiskin.json&quot;));</span>

<span class="nc" id="L193">        playerTextureAtlas = new TextureAtlas(Gdx.files.internal(&quot;sprites/player.txt&quot;));</span>
<span class="nc" id="L194">        interactionIconsTextureAtlas = new TextureAtlas(Gdx.files.internal(&quot;sprites/interaction_icons.txt&quot;));</span>

<span class="nc" id="L196">        tiledMap = new TmxMapLoader().load(&quot;maps/campus-east.tmx&quot;);</span>

<span class="nc" id="L198">        tooltipFont = new BitmapFont();</span>
<span class="nc" id="L199">        tooltipFont.getData().setScale(0.07f);</span>
<span class="nc" id="L200">        tooltipFont.setUseIntegerPositions(false);</span>
<span class="nc" id="L201">        tooltipFont.getRegion().getTexture().setFilter(Texture.TextureFilter.Linear, Texture.TextureFilter.Linear);</span>
<span class="nc" id="L202">        tooltipFont.setColor(Color.BLACK);</span>

<span class="nc" id="L204">        overlayFont = new BitmapFont();</span>
<span class="nc" id="L205">        overlayFont.getData().setScale(0.2f);</span>
<span class="nc" id="L206">        overlayFont.setUseIntegerPositions(false);</span>
<span class="nc" id="L207">        overlayFont.getRegion().getTexture().setFilter(Texture.TextureFilter.Linear, Texture.TextureFilter.Linear);</span>
<span class="nc" id="L208">        overlayFont.setColor(Color.WHITE);</span>

<span class="nc" id="L210">        spriteBatch = new SpriteBatch();</span>
<span class="nc" id="L211">        whitePixel = new Texture(Gdx.files.internal(&quot;white_pixel.png&quot;));</span>
<span class="nc" id="L212">        shapeDrawer = new ShapeDrawer(spriteBatch, new TextureRegion(whitePixel, 0, 0, 1, 1));</span>

<span class="nc" id="L214">        mainMenu = new MainMenu(this);</span>

<span class="nc" id="L216">        this.setScreen(mainMenu);</span>
<span class="nc" id="L217">    }</span>

    @Override
    public void render() {
<span class="nc" id="L221">        super.render();</span>
<span class="nc" id="L222">    }</span>

    @Override
    public void dispose() {
<span class="nc" id="L226">        mainMenu.dispose();</span>

<span class="nc bnc" id="L228" title="All 2 branches missed.">        if (playing != null) {</span>
<span class="nc" id="L229">            playing.dispose();</span>
        }
<span class="nc bnc" id="L231" title="All 2 branches missed.">        if (endScreen != null) {</span>
<span class="nc" id="L232">            endScreen.dispose();</span>
        }

<span class="nc" id="L235">        skin.dispose();</span>

<span class="nc" id="L237">        playerTextureAtlas.dispose();</span>
<span class="nc" id="L238">        interactionIconsTextureAtlas.dispose();</span>
<span class="nc" id="L239">        whitePixel.dispose();</span>

<span class="nc" id="L241">        tiledMap.dispose();</span>

<span class="nc" id="L243">        tooltipFont.dispose();</span>
<span class="nc" id="L244">        spriteBatch.dispose();</span>
<span class="nc" id="L245">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.9.202303310957</span></div></body></html>