<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>HeslingtonHustle.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">tests</a> &gt; <a href="index.source.html" class="el_package">io.github.uoyeng1g6</a> &gt; <span class="el_source">HeslingtonHustle.java</span></div><h1>HeslingtonHustle.java</h1><pre class="source lang-java linenums">package io.github.uoyeng1g6;

import com.badlogic.gdx.Game;
import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.graphics.Color;
import com.badlogic.gdx.graphics.Texture;
import com.badlogic.gdx.graphics.g2d.BitmapFont;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;
import com.badlogic.gdx.graphics.g2d.TextureAtlas;
import com.badlogic.gdx.graphics.g2d.TextureRegion;
import com.badlogic.gdx.maps.tiled.TiledMap;
import com.badlogic.gdx.maps.tiled.TmxMapLoader;
import com.badlogic.gdx.physics.box2d.Box2D;
import com.badlogic.gdx.scenes.scene2d.ui.Skin;
import io.github.uoyeng1g6.screens.EndScreen;
import io.github.uoyeng1g6.screens.MainMenu;
import io.github.uoyeng1g6.screens.Playing;
import space.earlygrey.shapedrawer.ShapeDrawer;

/**
 * The main game class. Handles the switching between different screens as well as most of the asset
 * loading and cleanup that is required for the rest of the game.
 */
public class HeslingtonHustle extends Game {
    /**
     * Enum representing all possible game states.
     */
<span class="nc" id="L28">    public enum State {</span>
        /**
         * The game is currently on the main menu screen.
         */
<span class="nc" id="L32">        MAIN_MENU,</span>
        /**
         * The game is currently being played.
         */
<span class="nc" id="L36">        PLAYING,</span>
        /**
         * The game is currently on the game over screen.
         */
<span class="nc" id="L40">        END_SCREEN</span>
    }

    /**
     * Whether debug mode is enabled - if {@code true} then hitbox outlines will be shown for the player
     * and any interactables, as well as showing layout debug lines for {@code scene2d.ui}.
     */
    public final boolean debug;
    /**
     * Whether physics debug mode is enabled - if {@code true} then hitbox outlines will be shown for any physics
     * objects handled by {@code box2d}.
     */
    public final boolean physicsDebug;

    /**
     * The skin to use when rendering {@code scene2d.ui} components.
     */
    public Skin skin;

    /**
     * Texture atlas containing all images for the player's sprite.
     */
    public TextureAtlas playerTextureAtlas;
    /**
     * Texture atlas containing all icons used to mark interaction locations on the map.
     */
    public TextureAtlas interactionIconsTextureAtlas;
    /**
     * Texture which is just a single white pixel. Required for {@link ShapeDrawer} to work properly.
     */
    public Texture whitePixel;

    /**
     * The tilemap to use for the game's background.
     */
    public TiledMap tiledMap;

    /**
     * The font to use when rendering tooltips.
     */
    public BitmapFont tooltipFont;
    /**
     * The font to use when rendering the screen overlay that is drawn while an interaction is in progress.
     */
    public BitmapFont overlayFont;

    /**
     * The global spritebatch to use for the game.
     */
    public SpriteBatch spriteBatch;
    /**
     * The global shapedrawer to use for the game.
     */
    public ShapeDrawer shapeDrawer;

    /**
     * The main menu screen instance.
     */
    MainMenu mainMenu;
    /**
     * The gameplay screen instance. A new one is required to be created each time the
     * player starts a new game.
     */
<span class="nc" id="L103">    Playing playing = null;</span>
    /**
     * The end screen instance. A new one is required to be create each time the
     * player finishes a game.
     */
<span class="nc" id="L108">    EndScreen endScreen = null;</span>

    /**
     * The game's current state.
     */
<span class="nc" id="L113">    private State currentState = State.MAIN_MENU;</span>

<span class="nc" id="L115">    public HeslingtonHustle() {</span>
        // Properties retrieved from command-line to allow enabling of different debug modes to help with development
<span class="nc" id="L117">        debug = System.getProperty(&quot;game.debug&quot;, &quot;false&quot;).equals(&quot;true&quot;);</span>
<span class="nc" id="L118">        physicsDebug = System.getProperty(&quot;game.physicsDebug&quot;, &quot;false&quot;).equals(&quot;true&quot;);</span>
<span class="nc" id="L119">    }</span>

    /**
     * Quit the game to desktop.
     */
    public void quit() {
<span class="nc" id="L125">        Gdx.app.exit();</span>
<span class="nc" id="L126">    }</span>

    /**
     * Set the current game state. Handles switching between the different screens and cleanup between
     * screen changes.
     *
     * @param state the state that the game should transition to.
     */
    public void setState(State state) {
<span class="nc bnc" id="L135" title="All 4 branches missed.">        switch (state) {</span>
            case MAIN_MENU:
<span class="nc" id="L137">                this.setScreen(mainMenu);</span>
<span class="nc" id="L138">                break;</span>
            case PLAYING:
<span class="nc bnc" id="L140" title="All 2 branches missed.">                if (playing != null) {</span>
<span class="nc" id="L141">                    playing.dispose();</span>
                }
<span class="nc" id="L143">                playing = new Playing(this);</span>
<span class="nc" id="L144">                this.setScreen(playing);</span>
<span class="nc" id="L145">                break;</span>
            case END_SCREEN:
<span class="nc bnc" id="L147" title="All 2 branches missed.">                if (endScreen != null) {</span>
<span class="nc" id="L148">                    endScreen.dispose();</span>
                }
<span class="nc" id="L150">                endScreen = new EndScreen(this, playing.getGameState());</span>
<span class="nc" id="L151">                this.setScreen(endScreen);</span>
                break;
        }
<span class="nc" id="L154">        currentState = state;</span>
<span class="nc" id="L155">    }</span>

    @Override
    public void create() {
<span class="nc" id="L159">        Box2D.init();</span>

<span class="nc" id="L161">        skin = new Skin(Gdx.files.internal(&quot;skins/default/uiskin.json&quot;));</span>

<span class="nc" id="L163">        playerTextureAtlas = new TextureAtlas(Gdx.files.internal(&quot;sprites/player.txt&quot;));</span>
<span class="nc" id="L164">        interactionIconsTextureAtlas = new TextureAtlas(Gdx.files.internal(&quot;sprites/interaction_icons.txt&quot;));</span>

<span class="nc" id="L166">        tiledMap = new TmxMapLoader().load(&quot;maps/campus-east.tmx&quot;);</span>

<span class="nc" id="L168">        tooltipFont = new BitmapFont();</span>
<span class="nc" id="L169">        tooltipFont.getData().setScale(0.07f);</span>
<span class="nc" id="L170">        tooltipFont.setUseIntegerPositions(false);</span>
<span class="nc" id="L171">        tooltipFont.getRegion().getTexture().setFilter(Texture.TextureFilter.Linear, Texture.TextureFilter.Linear);</span>
<span class="nc" id="L172">        tooltipFont.setColor(Color.BLACK);</span>

<span class="nc" id="L174">        overlayFont = new BitmapFont();</span>
<span class="nc" id="L175">        overlayFont.getData().setScale(0.2f);</span>
<span class="nc" id="L176">        overlayFont.setUseIntegerPositions(false);</span>
<span class="nc" id="L177">        overlayFont.getRegion().getTexture().setFilter(Texture.TextureFilter.Linear, Texture.TextureFilter.Linear);</span>
<span class="nc" id="L178">        overlayFont.setColor(Color.WHITE);</span>

<span class="nc" id="L180">        spriteBatch = new SpriteBatch();</span>
<span class="nc" id="L181">        whitePixel = new Texture(Gdx.files.internal(&quot;white_pixel.png&quot;));</span>
<span class="nc" id="L182">        shapeDrawer = new ShapeDrawer(spriteBatch, new TextureRegion(whitePixel, 0, 0, 1, 1));</span>

<span class="nc" id="L184">        mainMenu = new MainMenu(this);</span>

<span class="nc" id="L186">        this.setScreen(mainMenu);</span>
<span class="nc" id="L187">    }</span>

    @Override
    public void render() {
<span class="nc" id="L191">        super.render();</span>
<span class="nc" id="L192">    }</span>

    @Override
    public void dispose() {
<span class="nc" id="L196">        mainMenu.dispose();</span>

<span class="nc bnc" id="L198" title="All 2 branches missed.">        if (playing != null) {</span>
<span class="nc" id="L199">            playing.dispose();</span>
        }
<span class="nc bnc" id="L201" title="All 2 branches missed.">        if (endScreen != null) {</span>
<span class="nc" id="L202">            endScreen.dispose();</span>
        }

<span class="nc" id="L205">        skin.dispose();</span>

<span class="nc" id="L207">        playerTextureAtlas.dispose();</span>
<span class="nc" id="L208">        interactionIconsTextureAtlas.dispose();</span>
<span class="nc" id="L209">        whitePixel.dispose();</span>

<span class="nc" id="L211">        tiledMap.dispose();</span>

<span class="nc" id="L213">        tooltipFont.dispose();</span>
<span class="nc" id="L214">        spriteBatch.dispose();</span>
<span class="nc" id="L215">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.9.202303310957</span></div></body></html>